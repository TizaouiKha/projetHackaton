<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<app-sidebar-toggle (click)="sideNav.toggle()" class="matSideToggle"></app-sidebar-toggle>
<mat-sidenav-container>
    <mat-sidenav #sideNav mode="side" position="end" [class.mat-elevation-z4]>
        <div class="example-container">
            <div class="button-group">
                <button class="top-button" id="allButton">Tous</button>
                <button class="top-button" id="proButton">Entre Pro</button>
            </div>
            <div class="date-line">
                <span class="date-text">Lundi 21 novembre 2023</span>
              </div>
            <div class="chat-container">
                <!-- Bulle de message du docteur -->
                <div class="chat-message doctor">
                  <div class="chat-bubble">
                    <p class="chat-text">Bonjour M Croizat, comme discuté à l'instant au téléphone, vous pouvez passer à 6U d'insuline rapide le soir avant le diner.</p>
                    <p class="chat-timestamp">09:23</p>
                  </div>
                </div>
              
                <!-- Bulle de message du patient -->
                <div class="chat-message patient">
                  <div class="chat-bubble">
                    <p class="chat-name">Gauthier Croizat</p>
                    <p class="chat-text">C'est bien noté merci</p>
                    <p class="chat-timestamp">13:31</p>
                  </div>
                </div>
              </div>
            
            <div class="message-container">
              <label for="recipient">Destinataire : </label>
              <select id="recipient">
                  <option value="everyone">Tout le monde</option>
                  <!-- Ajoutez d'autres options ici -->
              </select>
              <textarea></textarea>
              <div class="notification-toggle">
                <mat-slide-toggle id="notify-pros" color="primary">Avec notification aux pros</mat-slide-toggle>
                <button type="submit" class="send-message">Envoyer</button>
            </div>
          </div>
        </div>
    </mat-sidenav>
    <mat-sidenav-content>

<h1>Steto </h1>
<div *ngIf="isPractitioner==1">
    <form>
        <label for="userSelect">Choisir un patient : </label>
        <select id="userSelect" name="userSelect" [(ngModel)]="selectedPatient" (change)="onPatientChange()">
        <option *ngFor="let patient of patients" [ngValue]="patient">{{ patient.firstName }} {{ patient.lastName }}</option>
        </select>
    </form>
</div>
<br>

<div [innerHTML]="showPatients() | safeHtml"></div>

<div name="infosPatient">
    <div *ngFor="let patient of patients" [ngClass]="{ 'selected': patient.id === this.idPatient}">
        <div *ngIf="this.idPatient === patient.id">
            <div name="nomPrenom">{{ patient.firstName }} {{ patient.lastName }}</div>
            <div name="email">Email du patient : {{ patient.email }}</div>
            <div name="diabetesType">Type de diabete : {{ patient.diabetesType }}</div>
            <div name="insulinScheme">Schéma d'insuline : {{ patient.insulinScheme }}</div>
            <br>
            <div name="chatById">Afficher à droite le chat avec la careTeam du patient selectionné dans la liste </div>
            <br>
        </div>
    </div>
</div>

<div name="communications">
    <div *ngFor="let communication of communications">
            <div name="id">id msg: {{ communication.id }}</div>
            <div name="idCareTeam">id CareTeam : {{ communication.idCareTeam }}</div>
            <div name="isEntrePro">isEntrePro : {{ communication.isEntrePro }}</div>
            <div name="idSender">idSender : {{ communication.idSender }}</div>    
            <div name="txtMsg">message : {{ communication.textMsg }}</div>
            <div name="fileMsg">fileMsg : {{ communication.fileMsg }}</div>
            <div name="dateSent">dateSent : {{ communication.dateSent }}</div>
            <div name="dateReceived">dateReceived : {{ communication.dateReceived }}</div>
            <br>
        </div>
    </div>
<button (click)="deconnexion()">Déconnexion</button>

    </mat-sidenav-content>
</mat-sidenav-container>