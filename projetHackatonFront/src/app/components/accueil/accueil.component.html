<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
<app-sidebar-toggle (click)="sideNav.toggle(); showMessages()" class="matSideToggle"></app-sidebar-toggle>
<mat-sidenav-container>
    <mat-sidenav #sideNav mode="side" position="end" [class.mat-elevation-z4]>
        <div class="example-container">
            <div class="button-group">
                <button class="top-button" id="allButton" (click)="toggleMessages(false)" [ngClass]="{'active': showAllMessages}">Tous</button>
                <button class="top-button" id="proButton" (click)="toggleMessages(true)" [ngClass]="{'active': !showAllMessages}">Entre Pro</button>
            </div>
            <!-- Affichage des messages filtrés -->
            <div class="chat-container">
                <div *ngFor="let message of messages" [ngClass]="{'hidden': !showAllMessages && message.type !== 1}">
                    <div class="chat-message" [ngClass]="message.pro">
                        <div class="chat-bubble">
                            <p *ngIf="message.name" class="chat-name">{{message.name}}</p>
                            <p class="chat-text">{{message.content}}</p>
                            <div class="timestamp-container">
                                <p class="chat-timestamp">{{message.timestamp}}</p>
                                <span *ngIf="message.type === 1" class="pro-tag">ENTRE PRO</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="!showAllMessages" class="date-line">
              <span class="date-text">Lundi 21 novembre 2023</span>
          </div>
            <!-- Conteneur de saisie de message toujours visible -->
            <div class="message-container">
                <label for="recipient">Destinataire : </label>
                <select id="recipient">
                    <option value="everyone">Tout le monde</option>
                    <!-- Ajoutez d'autres options ici -->
                </select>
                <textarea></textarea>
                <div class="notification-toggle">
                    <mat-slide-toggle id="notify-pros" color="primary">Avec notification aux pros</mat-slide-toggle>
                    <button type="submit" class="send-message">Envoyer</button>
                </div>
            </div>
        </div>
    </mat-sidenav>
      <mat-sidenav-content>
          <p>accueil works!</p>
          <h1>Placer ici les infos de base et le chat</h1>
          <button (click)="deconnexion()">Déconnexion</button>
          <div [innerHTML]="showPatients() | safeHtml"></div>
          <h1>Steto </h1>
<div *ngIf="isPractitioner==1">
    <form>
        <label for="userSelect">Choisir un patient : </label>
        <select id="userSelect" name="userSelect" [(ngModel)]="selectedPatient" (change)="onPatientChange()">
        <option *ngFor="let patient of patients" [ngValue]="patient">{{ patient.firstName }} {{ patient.lastName }}</option>
        </select>
    </form>
</div>
          <div name="infosPatient">
            <div *ngFor="let patient of patients" [ngClass]="{ 'selected': patient.id === this.idPatient}">
                <div *ngIf="this.idPatient === patient.id">
                    <div name="nomPrenom">{{ patient.firstName }} {{ patient.lastName }}</div>
                    <div name="email">Email du patient : {{ patient.email }}</div>
                    <div name="diabetesType">Type de diabete : {{ patient.diabetesType }}</div>
                    <div name="insulinScheme">Schéma d'insuline : {{ patient.insulinScheme }}</div>
                    <br>
                    <div name="chatById">Afficher à droite le chat avec la careTeam du patient selectionné dans la liste </div>
                    <br>
                </div>
            </div>
        </div>
        
        <div name="communications">
            <div *ngFor="let communication of communications">
                    <div name="id">id msg: {{ communication.id }}</div>
                    <div name="idCareTeam">id CareTeam : {{ communication.idCareTeam }}</div>
                    <div name="isEntrePro">isEntrePro : {{ communication.isEntrePro }}</div>
                    <div name="idSender">idSender : {{ communication.idSender }}</div>    
                    <div name="txtMsg">message : {{ communication.textMsg }}</div>
                    <div name="fileMsg">fileMsg : {{ communication.fileMsg }}</div>
                    <div name="dateSent">dateSent : {{ communication.dateSent }}</div>
                    <div name="dateReceived">dateReceived : {{ communication.dateReceived }}</div>
                    <br>
                </div>
            </div>
        
      </mat-sidenav-content>
  </mat-sidenav-container>



<br>

<div [innerHTML]="showPatients() | safeHtml"></div>

